# Kedro catalog for debugging - Raw input and pipeline outputs only
# MLflow tracking disabled - all outputs saved to data/ folders

# ============================================================================
# RAW INPUT (do not delete)
# ============================================================================
raw_account_data:
  type: kedro_datasets.pandas.ParquetDataset
  filepath: data/01_raw/dataset2.parquet
  load_args:
    engine: pyarrow
  save_args:
    engine: pyarrow
    compression: zstd

raw_missing_stats:
  type: json.JSONDataset
  filepath: data/08_reporting/raw_missing_stats.json
  save_args:
    ensure_ascii: false
    indent: 2

# ============================================================================
# INGESTION PIPELINE - Output: standardized_data
# ============================================================================
validated_raw_data:
  type: MemoryDataset

standardized_data_raw:
  type: MemoryDataset

standardized_data:
  type: kedro_datasets.pandas.ParquetDataset
  filepath: data/02_intermediate/standardized_data.parquet
  save_args:
    engine: pyarrow
    compression: zstd
    index: false
  load_args:
    engine: pyarrow

ingestion_metadata:
  type: MemoryDataset

# ============================================================================
# PREPROCESS PIPELINE - Output: validated_data
# ============================================================================
cleaned_data:
  type: MemoryDataset

filtered_data:
  type: MemoryDataset

normalized_data:
  type: MemoryDataset

validated_data_raw:
  type: MemoryDataset

validated_data:
  type: kedro_datasets.pandas.ParquetDataset
  filepath: data/03_primary/validated_data.parquet
  save_args:
    engine: pyarrow
    compression: zstd
    index: false
  load_args:
    engine: pyarrow

# ============================================================================
# FEATURE PIPELINE - Output: base_table
# ============================================================================
feature_data:
  type: MemoryDataset

selected_features:
  type: MemoryDataset

base_table:
  type: kedro_datasets.pandas.ParquetDataset
  filepath: data/04_feature/base_table.parquet
  save_args:
    engine: pyarrow
    compression: zstd
    index: false
  load_args:
    engine: pyarrow

# ============================================================================
# SPLIT PIPELINE - Output: serialized_datasets (text + labels)
# ============================================================================
hf_dataset:
  type: MemoryDataset

label_names:
  type: MemoryDataset

split_datasets_raw:
  type: MemoryDataset

split_datasets:
  type: MemoryDataset

serialized_datasets:
  type: pickle.PickleDataset
  filepath: data/05_model_input/serialized_datasets.pkl

# ============================================================================
# TRAIN PIPELINE - Output: tokenized_datasets (MLflow Artifact)
# ============================================================================
tokenized_datasets:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataset
  dataset:
    type: pickle.PickleDataset
    filepath: data/06_models/tokenized_datasets.pkl
  artifact_path: data/tokenized_datasets

token_length_report:
  type: json.JSONDataset
  filepath: data/08_reporting/token_length_report.json
  save_args:
    ensure_ascii: false
    indent: 2

tokenizer:
  type: MemoryDataset

trainer_ready_data:
  type: MemoryDataset
